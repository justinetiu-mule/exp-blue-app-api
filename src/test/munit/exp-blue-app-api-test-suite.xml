<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:munit="http://www.mulesoft.org/schema/mule/munit" xmlns:munit-tools="http://www.mulesoft.org/schema/mule/munit-tools"
	xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
	xsi:schemaLocation="
		http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
		http://www.mulesoft.org/schema/mule/munit http://www.mulesoft.org/schema/mule/munit/current/mule-munit.xsd
		http://www.mulesoft.org/schema/mule/munit-tools  http://www.mulesoft.org/schema/mule/munit-tools/current/mule-munit-tools.xsd">
	<munit:config name="exp-blue-app-api-test-suite.xml" />
	<munit:test name="post-sales-test" doc:id="42fa4c61-1528-4ed9-9e7a-9307b6cffb17" >
		<munit:behavior >
			<munit-tools:mock-when doc:name="Mock -  Create Sales HTTP Request" doc:id="b7f2b14b-516f-4477-9df1-924438684b56" processor="http:request" >
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue=" Create Sales HTTP Request" attributeName="doc:name" />
				</munit-tools:with-attributes>
			</munit-tools:mock-when>
		</munit:behavior>
		<munit:execution >
			<munit:set-event doc:name="Set Event" doc:id="efa1efa1-0170-4200-ab2f-620ef1b172f5" >
				<munit:payload value='#[output application/json&#10;---&#10;{&#10;  "salesId": "B987654",&#10;  "fullName": "Ben Blue",&#10;  "deliveryLoc": "1 St. Barangay 123, Manila",&#10;  "age": "29",&#10;  "gender": null,&#10;  "contact": "+639999999989",&#10;  "products": [&#10;    {&#10;      "id": " B987654-001",&#10;      "name": "The Chronicles of Narnia: The Lion, The Witch and the Wardrobe",&#10;      "price": 1499,&#10;      "qty": 1&#10;    }&#10;  ],&#10;  "amountDue": 1499,&#10;  "paymentType": "Cash",&#10;  "creationDate": "2025-09-20T10:20:00Z"&#10;}]' mediaType="application/json" />
				<munit:variables >
					<munit:variable key="appName" value="exp-blue-app-api" />
					<munit:variable key="correlationId" value="3716f1f2-dd32-4f61-9326-ca11702da44e" />
				</munit:variables>
			</munit:set-event>
			<flow-ref doc:name="post:\sales:application\json:exp-blue-app-api-config" doc:id="2f88beda-2781-486e-a719-564638ae4694" name="post:\sales:application\json:exp-blue-app-api-config" />
		</munit:execution>
	</munit:test>
	<munit:test name="get-sales-test" doc:id="a9492d2d-f0be-4786-ab72-9d7fcdca1fa7" >
		<munit:behavior >
			<munit-tools:mock-when doc:name="Mock - Retrieve Sales Details HTTP Request" doc:id="4c533902-d043-4a29-8f4d-084a8bb4630e" processor="http:request" >
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="Retrieve Sales Details HTTP Request" attributeName="doc:name" />
				</munit-tools:with-attributes>
			</munit-tools:mock-when>
		</munit:behavior>
		<munit:execution >
			<munit:set-event doc:name="Set Event" doc:id="5442a75e-fc9d-4ce4-9c20-e43b8ecd5b71" >
				<munit:attributes value='#[output application/json&#10;---&#10;{&#10;	uriParams: {&#10;		transactionId: "B10001"&#10;	}&#10;}]' mediaType="application/json" />
				<munit:variables >
					<munit:variable key="appName" value="exp-blue-app-api" />
					<munit:variable key="correlationId" value="3716f1f2-dd32-4f61-9326-ca11702da44e" />
				</munit:variables>
			</munit:set-event>
			<flow-ref doc:name="get:\sales\(transactionId):exp-blue-app-api-config" doc:id="7d8dd6bb-88ec-49aa-b7eb-34e78faaef9b" name="get:\sales\(transactionId):exp-blue-app-api-config" />
		</munit:execution>
	</munit:test>
	<munit:test name="exp-orange-app-api-main-test" doc:id="c6c9a09a-51f0-42aa-9351-35292dae5350" >
		<munit:behavior >
			<munit-tools:mock-when doc:name="Mock - Listener" doc:id="f1db8045-785b-438c-9ec5-7b826527cf80" processor="http:listener" >
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="exp-blue-app-api-httpListenerConfig" attributeName="config-ref" />
				</munit-tools:with-attributes>
			</munit-tools:mock-when>
			<munit-tools:mock-when doc:name="Mock - APIkit Router" doc:id="d3e17041-999b-4c50-8d07-cbd5ccb7c88e" processor="apikit:router" >
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="exp-blue-app-api-config" attributeName="config-ref" />
				</munit-tools:with-attributes>
			</munit-tools:mock-when>
		</munit:behavior>
		<munit:execution >
			<munit:set-event doc:name="Set Event" doc:id="daf6240a-98a0-4ab7-ac4c-c7b8ac41e0bb" >
				<munit:attributes value='#[output application/json&#10;---&#10;{&#10;	uriParams: {&#10;		transactionId: "B10001"&#10;	}&#10;}]' />
			</munit:set-event>
			<flow-ref doc:name="exp-blue-app-api-main" doc:id="6417b9ce-1243-48d1-9865-aa17f3487383" name="exp-blue-app-api-main" />
		</munit:execution>
	</munit:test>


</mule>
